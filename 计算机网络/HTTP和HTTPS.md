# HTTP和HTTPS

## 错误码

| 状态码 | 含义 |
| ---- | ---- |
| 1XX | 信息 |
| 2XX | 成功 |
| 3XX | 重定向 |
| 4XX | 客户端出错 |
| 5XX | 服务端出错 |

### 常见

100 ：表示可以继续发送或者

200：成功发送请求

301：永久重定向

302：临时重定向

400：请求报文语法错误

401：认证不通过

403：请求拒绝

404：找不到对应资源

500：服务器执行出错

502：网关或代理服务器出错，无法响应上游服务器的请求

503：服务器超负荷或正在维护

504：网关或代理服务器超时，无法连接上游服务器

## 301重定向和302重定向的区别

301重定向是永久的重定向，搜索引擎在抓取新的内容的同时也将旧的网址替换为了重定向之后的网址

302重定向只是暂时的重定向，搜索引擎会抓取新的内容而保留旧的地址，因为服务器返回302，所以，搜索搜索引擎认为新的网址是暂时的

PS：跳转式网站挟持：302问题，搜索引擎搜索内容遇到302会跳转网站搜索，当某A网站引用302跳转时会引入跳转网站内容，但是进入的仍然为网站A

## RESTful

一套编写接口的协议，协议规定如何编写以及如何设置返回值、状态码等信息

 就是用URL定位资源，用HTTP描述操作（GET，POST，PUT，DELETE，OPTION）

例子：

| 例子                               | 结果 |
| ---------------------------------- | ---- |
| a/friend,操作：GET -> 获取朋友信息 | √    |
| a/getfirend  -> 获取朋友信息       | ×    |

## RPC

简单说来就是类似本地调用的方式调用远程方法(其他服务器)

定义好确定的数据结构与返回值，使用protobuf

#### 为什么用RPC而非HTTP

长连接，避免TCP三次握手开销，简化报头，同时部署灵活，支持序列化和反序列化（把传输文件转换成二进制），同时对于微服务架构可以避免开发

http接口是在接口不多、系统与系统交互较少的情况下，解决信息孤岛初期常使用的一种通信手段；优点就是简单、直接、开发方便。利用现成的http协议进行传输。但是如果是一个大型的网站，内部子系统较多、接口非常多的情况下，RPC框架的好处就显示出来了，首先就是长链接，不必每次通信都要像http一样去3次握手什么的，减少了网络开销；其次就是RPC框架一般都有注册中心，有丰富的监控管理；发布、下线接口、动态扩展等，对调用方来说是无感知、统一化的操作。第三个来说就是安全性。最后就是最近流行的服务化架构、服务化治理，RPC框架是一个强力的支撑 

## HTTPS

https=http+ssl/tls

ssl是工作在传输层之上应用层之下，OSI中是会话层和表示层

主要作用 ：建立安全通道保证数据安全，认证网站真实性

http端口是80，https端口是443

http是明文传输，https是加密传输

## HTTPS通信步骤

 https://blog.csdn.net/wuhuagu_wuhuaguo/article/details/78507762 

 ![img](https://img-blog.csdn.net/20180408114247968) 



（1）客户使用https的URL访问Web服务器，要求与Web服务器建立SSL连接。

（2）Web服务器收到客户端请求后，会生成一对公钥和私钥，并把公钥放在证书中发给客户端浏览器。

（3）客户端浏览器根据双方同意的SSL连接的安全等级，建立会话密钥，然后用公钥将会话密钥加密，并传送给服务器。

（4）Web服务器用自己的私钥解密出会话密钥。

（5）Web服务器利用会话密钥加密与客户端之间的通信。 

优点：保障用户数据，更加安全

缺点：价格高，加密解密算法加重了服务器负担，会比http慢

## HTTP1.0,1.1,2.0区别

#### HTTP1.0

 http1.0 只有get/post/Head 这几种请求方式，请求数据时, 客户端与服务端3次握手，然后建立tcp 链接，一个Tcp链接只能传送一个请求和响应，响应结束后，关闭tcp 链接，下一次请求重新建立tcp 链接然后和上面一样 

#### HTTP1.1

链接地址：https://blog.csdn.net/CNYYGJ/article/details/53466059

①默认持久连接keep-alive：

节省通信量，只要客户端和服务端任意一端没有明确的断开TCP连接，就可以发送多次HTTP请求

②管线化：

客户端可以同时发送多个HTTP请求，而不用一个个等待响应

③断点续传原理：

其原理是：客户端记录下当前的下载进度，并在需要续传时通知服务器本次需要下载的内容片断

一个简单的断点续传实现如下：（HTTP1.1协议中定义了断点续传相关的属性，如Range和Content-Range）

当客户端下载一个1024K文件，下载到500k时网络中断

当客户端请求续传时，客户端需要在http头中声明本次需要续传的片断，如下：

Range: bytes=500000——这个头通知服务器从文件的500k位置开始传文件

服务器收到断点续传请求后，从文件的500k位置开始传输文件，并在http头开始增加Content-Range:bytes=500000-1024000

并且此时服务器端返回的HTTP状态码应该是206，而不是200

#### HTTP2.0

①新的二进制格式（Binary Format）：HTTP1.x的解析是基于文本。基于文本协议的格式解析存在天然缺陷，文本的表现形式有多样性，要做到健壮性考虑的场景必然很多，二进制则不同，只认0和1的组合。基于这种考虑HTTP2.0的协议解析决定采用二进制格式，实现方便且健壮。

②多路复用（MultiPlexing）：即连接共享，即每一个request都是是用作连接共享机制的。一个request对应一个id，这样一个连接上可以有多个request，每个连接的request可以随机的混杂在一起，接收方可以根据request的 id将request再归属到各自不同的服务端请求里面。

③header压缩：对HTTP1.x的header带有大量信息，而且每次都要重复发送，HTTP2.0使用encoder来减少需要传输的header大小，通讯双方各自cache一份header fields表，既避免了重复header的传输，又减小了需要传输的大小。

④服务端推送（server push）：服务端推送能把客户端所需要的资源伴随着index.html一起发送到客户端，省去了客户端重复请求的步骤。正因为没有发起请求，建立连接等操作，所以静态资源通过服务端推送的方式可以极大地提升速度。

##### HTTP请求格式

 https://www.cnblogs.com/open-yang/p/11182626.html 

 ![img](https://img2018.cnblogs.com/blog/1616056/201907/1616056-20190713232554466-1825538705.png) 