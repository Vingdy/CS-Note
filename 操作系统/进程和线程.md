# 进程和线程

进程是执行着的应用程序，是操作系统资源分配和调度的**独立**单位，而线程是进程内部的一个执行序列，是任务调度和执行的**基本**单位 

### 联系

 线程属于某一个进程，一个进程可以拥有多个线程，一个线程必须属于一个进程，同时线程会共享对应进程的资源，因为有线程的原因，使得进程能够并发，提高系统吞吐量。 某进程内的线程在其它进程不可见。 

### 区别

进程之间相互独立，各自拥有自己的资源和内存空间，但线程之间是会共享对应进程的资源和内存空间，但也有自己的资源（例如自己有自己的栈）；

进程之间切换开销会比较大，而线程切换的开销会比较小。

## 进程通信方法的特点以及使用场景

①管道 

管道是进程间通信中最古老的方式，包括无名管道和有名管道两种，前者用于父进程和子进程间的通信，后者用于运行于同一台机器上的任意两个进程间的通信

②消息队列 

消息队列用于运行于同一台机器上的进程间通信，它和管道很相似，是一个在系统内核中用来保存消息的队列，它在系统内核中是以消息链表的形式出现。消息链表中节点的结构用msg声明。事实上，它是一种正逐渐被淘汰的通信方式，我们可以用流管道或者套接口的方式来取代它。 

③ 共享内存 

共享内存是运行在同一台机器上的进程间通信最快的方式，因为数据不需要在不同的进程间复制。通常由一个进程创建一块共享内存区，其余进程对这块内存区进行 读写。得到共享内存有两种方式：映射/dev/mem设备和内存映像文件。前一种方式不给系统带来额外的开销，但在现实中并不常用，因为它控制存取的将是实际的物理内存。

④信号量 

信号量是用来协调不同进程间的数据对象的，而最主要的应用是前一节的共享内存方式的进程间通信。本质上，信号量是一个计数器，它用来记录对某个资源（如共享内存）的存取状况。（原理就是同步互斥问题）

⑤套接口 

套接口（socket）编程是实现Linux系统和其他大多数操作系统中进程间通信的主要方式之一。WWW服务、FTP服务、TELNET服务等都是基于套接口编程来实现的。无论是异地的计算机进程间还是本地同一台计算机内部的进程间通信都适用。

## 僵尸进程

当子进程先于父进程退出时，父进程没有调用wait函数或者waitpid()函数等待子进程结束，又没有显式忽略SIGCHLD信号，或者子进程调用exit函数的时候，这时候子进程虽然是结束了，但是其PCB会留下并同时占用进程号

## 孤儿进程

当子进程先于父进程退出时，留下仍然在运行的子进程就是孤儿进程，最后会被init进程接收并处理

## 守护进程

在后台运行，没有控制终端与之相连的进程；它独立于控制终端，通常周期性地执行某种任务 。

守护进程脱离于终端是为了避免进程在执行过程中的信息在任何终端上显示并且进程也不会被任何终端所产生的终端信息所打断 。 



